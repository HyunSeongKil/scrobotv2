<div>
  <div class="row">
    <div class="col"><h1>프로젝트 목록</h1></div>
  </div>

  <div class="mt-2 mx-2">
    <div class="card-deck">
      <div class="card mx-2 mb-2" style="min-width: 550px" *ngFor="let x of prjcts">
        <div class="card-header">
          <div class="row">
            <div class="col-6 fw-bold" [attr.data-prjct-id]="x.prjctId">{{ x.prjctNm }}</div>
            <div class="col-6 text-right text-end">
              <button type="button" class="btn btn-outline-primary btn-sm" title="배포" (click)="openDeployDialog(x.prjctId)">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-lightning" viewBox="0 0 16 16">
                  <path d="M13.405 4.027a5.001 5.001 0 0 0-9.499-1.004A3.5 3.5 0 1 0 3.5 10H13a3 3 0 0 0 .405-5.973zM8.5 1a4 4 0 0 1 3.976 3.555.5.5 0 0 0 .5.445H13a2 2 0 0 1 0 4H3.5a2.5 2.5 0 1 1 .605-4.926.5.5 0 0 0 .596-.329A4.002 4.002 0 0 1 8.5 1zM7.053 11.276A.5.5 0 0 1 7.5 11h1a.5.5 0 0 1 .474.658l-.28.842H9.5a.5.5 0 0 1 .39.812l-2 2.5a.5.5 0 0 1-.875-.433L7.36 14H6.5a.5.5 0 0 1-.447-.724l1-2z" />
                </svg>
              </button>
              <button type="button" class="btn btn-outline-danger btn-sm mx-1" title="배포 취소" (click)="undeploy(x.prjctId)">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-slash" viewBox="0 0 16 16">
                  <path
                    fill-rule="evenodd"
                    d="M3.112 5.112a3.125 3.125 0 0 0-.17.613C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13H11l-1-1H3.781C2.231 12 1 10.785 1 9.318c0-1.365 1.064-2.513 2.46-2.666l.446-.05v-.447c0-.075.006-.152.018-.231l-.812-.812zm2.55-1.45-.725-.725A5.512 5.512 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773a3.2 3.2 0 0 1-1.516 2.711l-.733-.733C14.498 11.378 15 10.626 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3c-.875 0-1.678.26-2.339.661z"
                  />
                  <path d="m13.646 14.354-12-12 .708-.708 12 12-.707.707z" />
                </svg>
              </button>
              <button class="btn btn-outline-secondary btn-sm mx-1" title="편집화면으로 이동" (click)="loadPrjct(x.prjctId)">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bounding-box-circles" viewBox="0 0 16 16">
                  <path d="M2 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM0 2a2 2 0 0 1 3.937-.5h8.126A2 2 0 1 1 14.5 3.937v8.126a2 2 0 1 1-2.437 2.437H3.937A2 2 0 1 1 1.5 12.063V3.937A2 2 0 0 1 0 2zm2.5 1.937v8.126c.703.18 1.256.734 1.437 1.437h8.126a2.004 2.004 0 0 1 1.437-1.437V3.937A2.004 2.004 0 0 1 12.063 2.5H3.937A2.004 2.004 0 0 1 2.5 3.937zM14 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM2 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm12 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z" />
                </svg>
              </button>
              <button class="btn btn-outline-secondary btn-sm" title="복사" (click)="copyPrjct(x.prjctId)">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-back" viewBox="0 0 16 16">
                  <path d="M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v2h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2H2a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2z" />
                </svg>
              </button>
              <button class="btn btn-outline-warning btn-sm mx-1" title="수정" (click)="openUpdtPrjctDialog(x.prjctId)">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                  <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z" />
                </svg>
              </button>
              <button class="btn btn-outline-danger btn-sm" title="삭제" (click)="deletePrjct(x.prjctId)">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
                  <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
                </svg>
              </button>
            </div>
          </div>
        </div>
        <div class="card-body">
          <h5 class="card-title"></h5>
          <p class="card-text">{{ x.prjctCn }}</p>
          <div class="d-inline"><span class="fw-bold">메뉴</span> : {{ menuCo[x.prjctId] }}개,</div>
          <div class="d-inline mx-2"><span class="fw-bold">화면</span> : {{ scrinCo[x.prjctId] }}개,</div>
          <div class="d-inline"><span class="fw-bold">생성일시</span> : {{ x.registDt | date: "yyyy-MM-dd HH:mm" }}</div>
        </div>
      </div>

      <ng-container *ngIf="0 === prjcts.length">
        <div class="card mx-2 mb-2">
          <div class="card-header"></div>
          <div class="card-body">
            <h5 class="card-title">데이터가 없습니다.</h5>
          </div>
        </div>
      </ng-container>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <button type="button" class="btn btn-secondary mt-5" (click)="regist()">등록</button>
    </div>
  </div>
</div>

<app-prjct-regist-dialog #prjctRegistDialogRef (savedEvent)="prjctSaved()"></app-prjct-regist-dialog>
<app-prjct-updt-dialog #prjctUpdtDialogRef (savedEvent)="prjctSaved()"></app-prjct-updt-dialog>
<app-select-trget-sys-dialog #deployDialogRef (selectedEvent)="trgetSysSelected($event)"></app-select-trget-sys-dialog>
