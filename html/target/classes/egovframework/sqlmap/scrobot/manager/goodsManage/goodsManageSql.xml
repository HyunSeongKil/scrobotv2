<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="goodsManage">

	<select id="selectGoodsList" resultType="HashMap">

		/*
		goodsManage.selectGoodsList*/
		<![CDATA[
	SELECT
		GOODS_ID
		,GOODS_NM
		,GOODS_AMT
		,DATE_FORMAT(WRT_YMD,'%Y.%m.%d') WRT_YMD
		,DATE_FORMAT(MDFCN_YMD,'%Y.%m.%d')  MDFCN_YMD
		,(CASE
		WHEN MDFR IS NULL OR MDFR = 'NULL' THEN WRTER
		WHEN MDFR IS NOT NULL THEN MDFR
		END
		) WRTER
		FROM GOODS
		WHERE
		DEL_YN = 'N'
		ORDER BY (GOODS_ID)*1 DESC
		]]>

	</select>

	<select id="selectGoodsDetail" resultType="HashMap"
		parameterType="HashMap">

		/*
		goodsManage.selectGoodsDetail*/
		SELECT
		GOODS_ID
		,GOODS_NM
		,GOODS_AMT
		FROM GOODS
		WHERE
		GOODS_ID = #{GOODS_ID}
		AND DEL_YN = 'N'
		ORDER BY WRT_YMD
		DESC

	</select>
	<select id="selectGoodsIdDetail" resultType="String">
		SELECT
		IFNULL(MAX(GOODS_ID*1) + 1, 1)
		FROM GOODS
	</select>
	<insert id="insertGoods" parameterType="HashMap">

		/*
		goodsManage.insertGoods*/
		INSERT INTO
		GOODS
		(GOODS_ID,GOODS_NM,GOODS_AMT,WRTER,WRT_YMD)
		VALUES
		(
		#{GOODS_ID}
		,#{GOODS_NM}
		,#{GOODS_AMT}
		,#{WRTER}
		,NOW()
		)

	</insert>

	<update id="deleteGoods" parameterType="HashMap">

		/*
		goodsManage.deleteGoods*/
		UPDATE
		GOODS
		SET
		DEL_YN='Y'
		WHERE
		GOODS_ID
		=
		#{GOODS_ID}

	</update>

	<update id="updateGoods" parameterType="HashMap">

		/*
		goodsManage.updateGoods*/
		UPDATE
		GOODS
		SET
		GOODS_NM=#{GOODS_NM}
		,GOODS_AMT=#{GOODS_AMT}
		,MDFR=#{MDFR}
		,MDFCN_YMD=NOW()
		WHERE
		GOODS_ID =
		#{GOODS_ID}

	</update>


</mapper>








