<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="popViewSelect">

	<select id="retrieveWrkList" parameterType="hashmap" resultType ="HashMap">

	    	/* popViewSelect.retrieveWrkList */
	    	
			SELECT VIEW_ID
			     , VIEW_NM
			     , HTML_SOURCE
			     , DATE_FORMAT(CHNG_HISTRY_DTTM,'%Y-%m-%d %H:%i:%s') AS CHNG_HISTRY_DTTM
			FROM VIEW
			WHERE CRTR_ID = #{USER_ID}
			<if test='VIEW_NM != "" and VIEW_NM != null'>
			AND UPPER(VIEW_NM) LIKE UPPER(CONCAT('%', #{VIEW_NM}, '%'))
			</if>
			<if test='VIEW_ID != "" and VIEW_ID != null'>
			AND VIEW_ID = #{VIEW_ID}
			</if>
			ORDER BY CHNG_HISTRY_DTTM DESC
	</select>
			
	<select id="retrieveWrkHistryList" parameterType="hashmap" resultType ="HashMap">

	    	/* popViewSelect.retrieveWrkHistryList */
	    	
			SELECT VIEW_ID
			     , VIEW_NM
				 , HTML_SOURCE
			     , DATE_FORMAT(MAKE_DTTM,'%Y-%m-%d %H:%i:%s') AS MAKE_DTTM
			FROM VIEW_HISTRY
			WHERE CRTR_ID = #{USER_ID}
			<if test='VIEW_NM != "" and VIEW_NM != null'>
			AND UPPER(VIEW_NM) LIKE UPPER(CONCAT('%', #{VIEW_NM}, '%'))    
			</if>
			ORDER BY MAKE_DTTM DESC
	</select> 
	


</mapper>