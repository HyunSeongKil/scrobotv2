<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="functionManage">

	<select id="selectFncList" resultType="HashMap">

		/*
		functionManage.selectFncList*/
		<![CDATA[
	SELECT
		FNC_ID
		,FNC_NM
		,DATE_FORMAT(WRT_YMD,'%Y.%m.%d') WRT_YMD
		,DATE_FORMAT(MDFCN_YMD,'%Y.%m.%d')  MDFCN_YMD
		,(CASE
		WHEN MDFR IS NULL OR MDFR = 'NULL' THEN WRTER
		WHEN MDFR IS NOT NULL THEN MDFR
		END
		) WRTER
		FROM FUNCTION
		WHERE
		DEL_YN = 'N'
		ORDER BY (FNC_ID)*1 DESC
		]]>

	</select>

	<select id="selectFncDetail" resultType="HashMap"
		parameterType="HashMap">

		/*
		functionManage.selectFncDetail*/
		SELECT
		FNC_ID
		,FNC_NM
		,FNC_DC
		,FNC_VAL
		FROM FUNCTION
		WHERE
		FNC_ID = #{FNC_ID}
		AND DEL_YN = 'N'
		ORDER BY WRT_YMD
		DESC

	</select>
	<select id="selectFncIdDetail" resultType="String">
		SELECT
		IFNULL(MAX(FNC_ID*1) + 1, 1)
		FROM FUNCTION
	</select>
	<insert id="insertFnc" parameterType="HashMap">

		/*
		functionManage.insertFnc*/
		INSERT INTO
		FUNCTION
		(FNC_ID,FNC_NM,FNC_DC,FNC_VAL,WRTER,WRT_YMD)
		VALUES
		(
		#{FNC_ID}
		,#{FNC_NM}
		,#{FNC_DC}
		,#{FNC_VAL}
		,#{WRTER}
		,NOW()
		)

	</insert>

	<update id="deleteFnc" parameterType="HashMap">

		/*
		functionManage.deleteFnc*/
		UPDATE
		FUNCTION
		SET
		DEL_YN='Y'
		WHERE
		FNC_ID
		=
		#{FNC_ID}

	</update>

	<update id="updateFnc" parameterType="HashMap">

		/*
		functionManage.updateFnc*/
		UPDATE
		FUNCTION
		SET
		FNC_NM=#{FNC_NM}
		,FNC_DC=#{FNC_DC}
		,FNC_VAL=#{FNC_VAL}
		,MDFR=#{MDFR}
		,MDFCN_YMD=NOW()
		WHERE
		FNC_ID =
		#{FNC_ID}

	</update>


</mapper>








